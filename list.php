<?php require('search.php'); ?><?php//一ページに表示する記事の数をmax_viewに定数として定義define( 'max_view', 5 );try {	//test@localhostでblogに接続	$pdo = new PDO( 'mysql:dbname=heroku_921e62bfdd3a5fd;host=us-cdbr-east-04.cleardb.com;charset=utf8', 'bf76585b664e5b', 'e925f993' );} catch ( PDOException $error ) {	//エラーの場合はエラーメッセージを吐き出す	exit( "データベースに接続できませんでした。<br>" . $error->getMessage() );}//必要なページ数を求める$count = $pdo->prepare( 'SELECT COUNT(*) AS count FROM property' );$count->execute();$total_count = $count->fetch( PDO::FETCH_ASSOC );$pages = ceil( $total_count[ 'count' ] / max_view );//現在いるページのページ番号を取得if ( !isset( $_GET[ 'page_id' ] ) ) {	$now = 1;} else {	$now = $_GET[ 'page_id' ];}//表示する記事を取得するSQLを準備$select = $pdo->prepare( "SELECT * FROM property ORDER BY no DESC LIMIT :start,:max " );if ( $now == 1 ) { //1ページ目の処理	$select->bindValue( ":start", $now - 1, PDO::PARAM_INT );	$select->bindValue( ":max", max_view, PDO::PARAM_INT );} else { //1ページ目以外の処理	$select->bindValue( ":start", ( $now - 1 ) * max_view, PDO::PARAM_INT );	$select->bindValue( ":max", max_view, PDO::PARAM_INT );} //実行し結果を取り出しておく$select->execute();$data = $select->fetchAll( PDO::FETCH_ASSOC );?><!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>情報連携実習III デモサイト vacant</title><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="情報連携実習IIIで作成"><meta name="keywords" content="レンタルオフィス,シェアオフィス,コワーキング,INIAD,坂村健"><link rel="stylesheet" href="css/style.css"><link rel="stylesheet" href="css/slide.css"><link rel="icon" href="favicon.ico" id="favicon"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png"><style type="text/css"></style><script src="https://kit.fontawesome.com/258022ddb4.js" crossorigin="anonymous"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> <script type="text/javascript" src="js/openclose.js"></script> <script type="text/javascript" src="js/fixmenu_pagetop.js"></script> <script type="text/javascript" src="js/myscript.js"></script> <!-- Bootstrap CSS --> <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">--> <!-- Bootstrap Javascript(jQuery含む) --> <!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script><script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>--></head><body class="c2"><div id="container">		<?php require('header.php'); ?>	<?phptry {	//test@localhostでblogに接続	$pdo = new PDO( 'mysql:dbname=heroku_921e62bfdd3a5fd;host=us-cdbr-east-04.cleardb.com;charset=utf8', 'bf76585b664e5b', 'e925f993' );} catch ( PDOException $error ) {	//エラーの場合はエラーメッセージを吐き出す	exit( "データベースに接続できませんでした。<br>" . $error->getMessage() );}?><div id="contents"><div id="contents-in"><div id="main"><section><h2>物件一覧</h2><?php//prepareでSQLを準備$select = $pdo->prepare( 'SELECT * FROM property' );$select->execute(); //準備したSQLを実行。PDO Statementクラスのオブジェクトが渡される。(SQLの結果も保持する)//PDO Statementのfetchメッソドを利用して、結果を一行ずつ取得。データがなくなるとFALSEを返す。while ( $row = $select->fetch( PDO::FETCH_ASSOC ) ) {	//							$title = htmlspecialchars( $row[ 'property_name' ] ); //タイトルを取得	//							$file_path = htmlspecialchars( $row[ 'id' ] ); //ファイルパスを取得	//							$station = htmlspecialchars( $row[ 'station' ] );	//							$zip = htmlspecialchars( $row[ 'zip' ] );	//							$state = htmlspecialchars( $row[ 'state' ] );	//							$city = htmlspecialchars( $row[ 'city' ] );	//							$street = htmlspecialchars( $row[ 'street' ] );	$title = $row[ 'property_name' ]; //タイトルを取得	$file_path = $row[ 'id' ]; //ファイルパスを取得	$applicant_name = $row[ 'applicant_name' ];	$station = $row[ 'station' ];	$zip = $row[ 'zip' ];	$state = $row[ 'state' ];	$city = $row[ 'city' ];	$street = $row[ 'street' ];	$email = $row[ 'email' ];	//						$datetime = $row['post_date'];	$datetime = date( 'Y年m月d日', strtotime( $row[ 'post_date' ] ) );	// HTMLの出力	echo "<div class='list'> <a href='./property.php?id=$file_path'>						<h4>$title</h4>						<figure><img src='images/iniad.jpg' alt=''></figure>						<table>							<tbody>								<tr>									<th>所在地</th>									<td>$state $city</td>									<th>価格</th>									<td>XXXX円</td>								</tr>								<tr>									<th>オーナー</th>									<td>$applicant_name</td>									<th>連絡先</th>									<td>$email</td>								</tr>							</tbody>						</table>						<span class='date'>【登録日: $datetime 】</span> </a> </div>				</section>";}?><div style="text-align:center ">	<?php	//ページネーションを表示	for ( $n = 1; $n <= $pages; $n++ ) {		if ( $n == $now ) {			echo "<span style='padding: 5px;'>$now</span>";		} else {			echo "<a href='./list.php?page_id=$n' style='padding: 5px;'>$n</a>";		}	}	?></div></div><!--/#main--><?php require('searchbox.php'); ?><!--/#sub--></div><!--/#contents-in--><div id="side">	<nav class="box1">		<h2>Contents</h2>		<ul class="submenu">			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>		</ul>	</nav>	<nav>		<h2>Contents</h2>		<ul class="submenu">			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>		</ul>		<ul class="submenu">			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>			<li><a href="#">メニューサンプル</a></li>		</ul>	</nav>	<p> <a href="member.php"><img src="images/banner1.jpg" alt="採用情報" class="pc"></a> <a href="member.php"><img src="images/banner1_sh.jpg" alt="採用情報" class="sh"></a> </p>	<p>上のバナー画像は、801px以上の端末と800px以下とで画像２種類が切り替わります。<br>		<a href="process.php#banner">詳しい説明はこちら。</a></p>	<div>		<h2>ボックスの外も</h2>		<p>使えます。サンプルテキスト。サンプルテキスト。</p>	</div></div><!--/#side--></div><!--/#contents--></div><!--/#container--><?php require('footer.php'); ?></body></html>